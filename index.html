<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ground_segmentation: GSeg3D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ground_segmentation<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Ground segmentation in pointcloud</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GSeg3D </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2ground__segmentation_2ground__segmentation_2README"></a><b>High-Precision Grid-Based Ground Segmentation for Safety-Critical Autonomous Driving and Robotics Applications</b></p>
<p>This module implements the core algorithmic components of <b>GSeg3D</b>, a high-precision, grid-based ground segmentation method for LiDAR point clouds designed for <b>safety-critical autonomous driving and robotics applications</b>. <br  />
 It follows the methodology described in the paper:</p>
<blockquote class="doxtable">
<p>&zwj;<b>GSeg3D: A High-Precision Grid-Based Algorithm for Safety-Critical Ground Segmentation in LiDAR Point Clouds</b> <br  />
 Muhammad Haider Khan Lodhi and Christoph Hertzberg <br  />
 <em>Proceedings of the 7th International Conference on Robotics and Computer Vision (ICRCV)</em>, <br  />
 Hong Kong, China, October 24–26, 2025. <br  />
 IEEE, 2025. <br  />
 DOI: <a href="https://doi.org/10.1109/ICRCV67407.2025.11349133">https://doi.org/10.1109/ICRCV67407.2025.11349133</a> </p>
</blockquote>
<p><img src="images/gseg3d.gif" alt="GSeg3D" class="inline"/></p>
<p>Please find below a summary comparison of the average results on the SemanticKITTI sequences 00–10: <img src="images/comparison.png" alt="Comparision" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md6"></a>
ROS2</h1>
<p>The official ROS 2 wrapper for <b>GSeg3D</b> is available here:</p>
<p><a href="https://github.com/dfki-ric/ground_segmentation_ros2">ROS 2 Node Implementation</a></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Motivation</h1>
<p>Reliable ground segmentation is a fundamental prerequisite for:</p><ul>
<li>Obstacle detection</li>
<li>Traversability estimation</li>
<li>Navigation and planning</li>
<li>Mapping and localization</li>
</ul>
<p>False positives (classifying ground as obstacles) can directly compromise safety and downstream decision-making. <br  />
 GSeg3D is explicitly designed to <b>maximize precision while maintaining robust recall</b>, even in cluttered and unstructured environments.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Algorithm Overview</h1>
<p>GSeg3D paper performs <b>two-phase grid-based ground segmentation</b>. For a reference implementation of the two-phase approach, see the ROS 2 node available <a href="https://github.com/dfki-ric/ground_segmentation_ros2/blob/c370b2be20c75dc9fb9e6710f933ab1328fa0981/src/ground_segmentation_ros2_node.cpp#L241">here</a>.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
&lt;a href="https://github.com/dfki-ric/ground_segmentation_ros2/blob/c370b2be20c75dc9fb9e6710f933ab1328fa0981/src/ground_segmentation_ros2_node.cpp#L84C8-L84C29" &gt;Phase I – Coarse Segmentation&lt;/a&gt;</h2>
<ul>
<li>Uses <b>larger vertical grid cells</b></li>
<li>Aggressively captures elevated structures as non-ground</li>
<li>Ensures high initial precision</li>
<li>May temporarily over-segment ground in cluttered areas</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
&lt;a href="https://github.com/dfki-ric/ground_segmentation_ros2/blob/c370b2be20c75dc9fb9e6710f933ab1328fa0981/src/ground_segmentation_ros2_node.cpp#L91C8-L91C30" &gt;Phase II – Refinement&lt;/a&gt;</h2>
<ul>
<li>Uses <b>smaller vertical grid cells</b></li>
<li>Re-evaluates ground points from Phase I</li>
<li>Corrects false positives and false negatives from Phase I</li>
<li>Enforces vertical consistency constraints</li>
</ul>
<p>This dual-phase strategy strikes a strong balance between precision and recall, a trade-off that is especially important in safety-critical systems.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Processing Pipeline</h1>
<p>Each phase follows the same four core steps:</p>
<ol type="1">
<li><b>Grid Representation</b><ul>
<li>The point cloud is discretized into a regular 3D grid</li>
<li>Each point is assigned to a cell based on configurable cell sizes</li>
</ul>
</li>
<li><b>Local Eigen Classification</b><ul>
<li>Per-cell covariance matrix and eigen decomposition</li>
<li>Cells classified as:<ul>
<li><code>LINE</code> (dominant linear structure)</li>
<li><code>PLANE</code> (surface-like structure)</li>
<li><code>NOISE</code> (scattered points)</li>
</ul>
</li>
</ul>
</li>
<li><b>Surface Gradient Analysis</b><ul>
<li>Robust plane fitting using <b>PCL SACSegmentation (PROSAC)</b></li>
<li>Slope estimation relative to gravity (world frame)</li>
<li>Planar cells exceeding slope thresholds are rejected as ground</li>
</ul>
</li>
<li><b>Ground Region Expansion</b><ul>
<li>Candidate ground cell centroids are indexed using a <b>KD-tree (nanoflann)</b></li>
<li>Radius-based neighborhood expansion ensures connectivity</li>
<li>Works even when grid resolution is finer than LiDAR scan-line spacing</li>
<li>Phase II additionally enforces height-difference constraints</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md12"></a>
Key Design Contributions</h1>
<h2><a class="anchor" id="autotoc_md13"></a>
KD-Tree–Based Ground Expansion</h2>
<p>Traditional grid-neighbor expansion fails at high grid resolutions due to scan-line gaps. <br  />
 GSeg3D overcomes this by:</p><ul>
<li>Indexing ground centroids in a KD-tree</li>
<li>Performing radius-based spatial expansion</li>
<li>Enabling fine grid resolutions without loss of connectivity or recall</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Robust Seed Initialization</h2>
<ul>
<li>Synthetic seed points are injected directly beneath the robot</li>
<li>Ensures reliable ground initialization even with occlusions or sparse data</li>
<li>Synthetic points are removed before final output and evaluation</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Multi-Step Ground Verification</h2>
<p>Each candidate cell undergoes:</p><ul>
<li>Plane inlier / outlier separation</li>
<li>Bounding-box sparsity analysis</li>
<li>Neighborhood height consistency checks</li>
<li>Floating-cell rejection (non-ground below)</li>
</ul>
<p>Only physically plausible and spatially coherent cells are labeled as ground.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Implementation Details</h1>
<p>To generate the HTML documentation for this library:</p>
<h2><a class="anchor" id="autotoc_md17"></a>
System Requirements</h2>
<p>OS: Ubuntu 22.04, Ubuntu 24.04</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Dependencies</h2>
<ul>
<li>CMake</li>
<li>PCL <br  />
</li>
<li>Eigen3 <br  />
</li>
<li>GoogleTest <br  />
</li>
<li>NanoFlann</li>
<li>JDK 17</li>
</ul>
<p>Example (Ubuntu):</p>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install cmake libpcl-dev libeigen3-dev libgtest-dev libnanoflann-dev openjdk-17-jre</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md19"></a>
Build Instructions</h2>
<div class="fragment"><div class="line">git clone git@github.com:dfki-ric/ground_segmentation.git</div>
<div class="line">cd ground_segmentation &amp;&amp; mkdir -p build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=RELEASE</div>
<div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md20"></a>
Generating Documentation</h2>
<ol type="1">
<li>Make sure you have <b>Doxygen</b> and <b>Graphviz</b> installed:</li>
</ol>
<div class="fragment"><div class="line">sudo apt install doxygen graphviz</div>
</div><!-- fragment --><ol type="1">
<li>From the root of the project, run CMake and build the <code>doc</code> target:</li>
</ol>
<div class="fragment"><div class="line">cmake --build . --target doc</div>
</div><!-- fragment --><ol type="1">
<li>After building, open the generated HTML documentation <code>doc/html/index.html</code> in your browser</li>
</ol>
<blockquote class="doxtable">
<p>&zwj;The main page will include the README and automatically list the header files and classes. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md21"></a>
Running Unit Tests</h2>
<div class="fragment"><div class="line">ctest --test-dir test/ --output-on-failure</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">./test/test_pointcloud_grid</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Visual Ground Segmentation Tool</h2>
<div class="fragment"><div class="line">./test/test_visual_segmentation &lt;cloud.pcd|cloud.ply&gt; [cell_size] [slope_deg] [dist_to_ground]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md23"></a>
Example</h3>
<div class="fragment"><div class="line">wget https://zenodo.org/records/13771864/files/utah.ply</div>
<div class="line">./test/test_visual_segmentation utah.ply 1.0 30 -0.5</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md24"></a>
Colour Coding</h3>
<ul>
<li>Green → Ground points <br  />
</li>
<li>Red → Obstacles / non-ground points <br  />
</li>
</ul>
<p>Close the viewer window to exit.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Core Class</h2>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Po<span class="keywordtype">int</span>T&gt;</div>
<div class="line"><span class="keyword">class </span>PointCloudGrid;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Main API</h2>
<div class="fragment"><div class="line">PointCloudGrid(<span class="keyword">const</span> GridConfig&amp; config);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setInputCloud(</div>
<div class="line">    pcl::PointCloud&lt;PointT&gt;::Ptr input,</div>
<div class="line">    <span class="keyword">const</span> Eigen::Quaterniond&amp; R_body2World</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">std::pair&lt;</div>
<div class="line">    pcl::PointCloud&lt;PointT&gt;::Ptr,</div>
<div class="line">    pcl::PointCloud&lt;PointT&gt;::Ptr</div>
<div class="line">&gt; segmentPoints();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md27"></a>
Typical Configuration</h1>
<p>Below is a recommended baseline setup for most outdoor mobile robotics use cases (e.g., LiDAR-based UGVs). Adjust values based on sensor height, terrain roughness, and map resolution.</p>
<p>Phase-I </p><div class="fragment"><div class="line">cellSizeX: 1.0</div>
<div class="line">cellSizeY: 1.0</div>
<div class="line">cellSizeZ: 10.0   # Phase I</div>
<div class="line">slopeThresholdDegrees: 20.0</div>
<div class="line">groundInlierThreshold: 0.125</div>
<div class="line">centroidSearchRadius: 5.0</div>
<div class="line">distToGround: -1.723 # (e.g. SemanticKITTI)</div>
<div class="line">maxGroundHeightDeviation: 0.1</div>
</div><!-- fragment --><p> Phase-II</p>
<p>After coarse ground detection of Phase-I, Phase II increases vertical resolution to refine classification. All parameters are kept same as Phase-I expect for the <code>cellSizeZ</code> </p><div class="fragment"><div class="line">cellSizeZ: 1.0</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
Performance Summary (SemanticKITTI)</h1>
<ul>
<li><b>Precision:</b> ~96–99% (low variance)</li>
<li><b>Recall:</b> ~85–91%</li>
<li><b>F1-score:</b> ~92–94%</li>
<li><b>Runtime:</b> ~48 ms (CPU, single scan average)</li>
</ul>
<p>GSeg3D consistently demonstrates <b>stable, high-precision performance</b> across:</p><ul>
<li>Urban environments</li>
<li>Highways</li>
<li>Unstructured terrain</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Intended Use</h1>
<ul>
<li>Safety-critical autonomous driving</li>
<li>Outdoor mobile robotics</li>
<li>Traversability analysis</li>
<li>Mapping and perception pipelines</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Notes &amp; Future Work</h1>
<ul>
<li>Recall degradation in dense vegetation remains challenging</li>
<li>Planned extensions:<ul>
<li>Semantic-aware refinement</li>
<li>Temporal fusion</li>
<li>GPU acceleration</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
Tests &amp; Visualisation</h1>
<p>This directory contains <b>unit tests</b> and a <b>visual debugging tool</b> for the <code>PointCloudGrid</code> ground segmentation implementation.</p>
<p>The code uses <b>PCL</b>, <b>Eigen</b>, and <b>GoogleTest</b> and is intended for quick validation of grid indexing, ground classification logic, and phase-based segmentation behaviour.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Contents</h2>
<ul>
<li><code>test_pointcloud_grid.cpp</code> <br  />
 GoogleTest-based <b>unit tests</b> covering:<ul>
<li>Grid indexing and hashing</li>
<li>Flat ground detection</li>
<li>Vertical structures as obstacles</li>
<li>Phase 1 vs Phase 2 behaviour</li>
<li>Orientation / gravity influence</li>
<li>Robustness against empty inputs</li>
</ul>
</li>
<li><code>test_visual_segmentation.cpp</code> <br  />
 A <b>visual inspection tool</b> that:<ul>
<li>Loads a <code>.pcd</code> or <code>.ply</code> point cloud</li>
<li>Runs <b>phase 1 + phase 2</b> ground segmentation</li>
<li>Displays ground (green) and obstacles (red) using PCLVisualizer</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
Notes</h2>
<ul>
<li>Phase 1 allows vertical and slanted propagation from the robot seed cell.</li>
<li>Phase 2 refines ground classification using only previously detected ground.</li>
<li>Orientation (<code>Eigen::Quaterniond</code>) is interpreted as sensor → world rotation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
License</h1>
<p>BSD-3 Clause License.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
Citation</h1>
<p>If you use this work, please cite:</p>
<p>Muhammad Haider Khan Lodhi and Christoph Hertzberg, "GSeg3D: A High-Precision Grid-Based Algorithm for Safety-Critical Ground Segmentation in LiDAR Point Clouds" in <em>2025 7th International Conference on Robotics and Computer Vision (ICRCV)</em>, pp. 119-126, 2025. doi: <a href="https://doi.org/10.1109/ICRCV67407.2025.11349133">10.1109/ICRCV67407.2025.11349133</a></p>
<p>© DFKI Robotics Innovation Center </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
